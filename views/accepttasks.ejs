<!DOCTYPE html>
<html lang="en">
  <%- include('header', {title:'New Task'}); %>
  <body>
    <%- include('navbar') %>
    <div class="container-fluid">
      <div class="row flex-nowrap min-vh-100 h-auto">
        <%- include('sidebar') %>
        <div class="col col-sm-9 col-xl-10 py-3 bg-light">
          <div class="container mb-3">
            <% if(task.accept === 'accepted') { %>
            <br />
            <div class="row mb-3 display-3 text-warning">
              Task
            </div>
            <br />
            <div
              class="row mb-3 alert alert-success shadow p-3 mb-3 rounded lead fs-6"
              role="alert"
            >
              You have accepted this task. It does not require response!
            </div>

            <div class="row shadow p-3 mb-3 bg-body rounded lead fs-6">
              <div class="container">
                <div>
                  The user <span class="text-warning"><%= task.email %> </span>
                  has requested you to accept a task below. Please indicate your
                  response. Once you have accepted, the task should appear in
                  your all tasks.
                </div>

                <dl class="row p-3">
                  <dt class="col-sm-3 text-secondary">Name</dt>
                  <dd class="col-sm-9 text-capitalize">
                    <%= task.name %>
                  </dd>

                  <dt class="col-sm-3 text-secondary ">Due Date</dt>
                  <dd class="col-sm-9">
                    <%= task.due_date %>
                  </dd>

                  <dt class="col-sm-3 mb-0 text-secondary ">Sent By</dt>
                  <dd class="col-sm-9 mb-0">
                    <%= task.username %>
                  </dd>
                </dl>
                <div class="row mb-3">
                  <div class="col-6 col-sm-2">
                    <input
                      type="checkbox"
                      class="btn-check"
                      id="btn-check-3"
                      autocomplete="off"
                      disabled
                    />
                    <label class="btn btn-success" for="btn-check-3"
                      >Accepted</label
                    >
                  </div>
                  <div class="col-6 col-sm-2">
                    <input
                      type="checkbox"
                      class="btn-check"
                      id="btn-check-3"
                      autocomplete="off"
                      disabled
                    />
                    <label class="btn btn-secondary" for="btn-check-3"
                      >Reject</label
                    >
                  </div>
                </div>
              </div>
            </div>

            <% } else { %>

            <form
              action="/task/<%= task.messagesid %>/accept"
              method="POST"
              id="acceptform"
              class="needs-validation"
              novalidate
            >
              <br />
              <div class="row mb-3 display-3 text-warning">
                Task
              </div>
              <br />
              <% if(task.accept === "rejected") { %>
              <div
                class="row mb-3 alert alert-danger shadow p-3 mb-3 rounded lead fs-6"
                role="alert"
              >
                You have rejected this task. It does not require response!
              </div>
              <% } %>

              <div class="row shadow p-3 mb-3 bg-body rounded lead fs-6">
                <div class="container">
                  <div>
                    The user
                    <span class="text-warning"><%= task.email %> </span>
                    has requested you to accept a task below. Please indicate
                    your response. Once you have accepted, the task should
                    appear in your all tasks.
                  </div>

                  <dl class="row p-3">
                    <dt class="col-sm-3 text-secondary">Name</dt>
                    <dd class="col-sm-9 text-capitalize">
                      <%= task.name %>
                    </dd>

                    <dt class="col-sm-3 text-secondary ">Due Date</dt>
                    <dd class="col-sm-9">
                      <%= task.due_date %>
                    </dd>

                    <dt class="col-sm-3 mb-0 text-secondary ">Sent By</dt>
                    <dd class="col-sm-9 mb-0">
                      <%= task.username %>
                    </dd>
                  </dl>
                  <% if(task.accept === "rejected") { %>
                  <div class="row mb-3">
                    <div class="form-check">
                      <input
                        type="checkbox"
                        class="btn-check"
                        id="btn-check"
                        autocomplete="off"
                        value="accepted"
                        name="accept"
                        onclick="myFunction()"
                        disabled
                      />
                      <label class="btn btn-warning" for="btn-check"
                        >Accept</label
                      >

                      <input
                        type="checkbox"
                        class="btn-check"
                        id="btn-check1"
                        value="rejected"
                        name="accept"
                        autocomplete="off"
                        onclick="myFunction()"
                        disabled
                      />
                      <label class="btn btn-warning" for="btn-check1"
                        >Reject</label
                      >
                    </div>
                  </div>
                  <% } else { %>
                  <div class="row mb-3">
                    <div class="form-check">
                      <input
                        type="checkbox"
                        class="btn-check"
                        id="btn-check"
                        autocomplete="off"
                        value="accepted"
                        name="accept"
                        onclick="myFunction()"
                      />
                      <label class="btn btn-warning" for="btn-check"
                        >Accept</label
                      >

                      <input
                        type="checkbox"
                        class="btn-check"
                        id="btn-check1"
                        value="rejected"
                        name="accept"
                        autocomplete="off"
                        onclick="myFunction()"
                      />
                      <label class="btn btn-warning" for="btn-check1"
                        >Reject</label
                      >
                    </div>
                  </div>
                  <% } %>
                </div>
              </div>
            </form>

            <% } %>
          </div>
        </div>
      </div>
    </div>
    <%- include('footer') %>
    <script>
      function myFunction() {
        document.getElementById("acceptform").submit();
      }
    </script>
  </body>
</html>
